set(TEST_DD ${CMAKE_CURRENT_BINARY_DIR}/dd.sh)
set(TEST_TARGET ${PROJECT_BINARY_DIR}/orthodocs)
set(TEST_SOURCES "isolated.scad nested.scad undocumented.scad")
set(TEST_SROOT ${CMAKE_CURRENT_SOURCE_DIR}/src-tree)
set(TEST_DROOT ${CMAKE_CURRENT_BINARY_DIR}/doc-root)
set(TEST_OKROOT ${CMAKE_CURRENT_SOURCE_DIR}/doc-root)

configure_file(${TEST_DD_IN} ${TEST_DD}
  FILE_PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE 
  @ONLY
)
add_test(
  NAME flat-lib
  COMMAND ${TEST_DD}
  WORKING_DIRECTORY ${PROJECT_SOURCE_DIR}
)
